<div class="container">
    <div class="block-header">
        <h2>View Tickets
            <small>Add all required details with fields marked as * are
                mandatory
            </small>
        </h2>
        <div class="actions m-t-10">
            <button type="button" class="btn btn-icon-text btn-default waves-effect m-r-5"
                    ng-click="cancelUpdateTickets();">
                <i class="zmdi zmdi-arrow-left"></i> Back to List
            </button>
            <button type="button" class="btn btn-icon-text btn-success waves-effect"
                    ng-click="Valid()" ng-if="complaint_type_valid_invalid == 2">
                <i class="zmdi zmdi-save"></i> Validate Ticket
            </button>
            <!--updateRaisedTicket-->
        </div>
    </div>

    <!--<div class="card" id="profile-main">-->
    <!-- <div class="pm-overview c-overflow">
         <div class="pmo-pic">
             <div class="p-relative">
                 <div class="fileinput fileinput-new">
                     <div class="fileinput-preview thumbnail">
                         <img src="assets/images/no-maps.png">
                     </div>
                 </div>
             </div>
         </div>
     </div>-->
    <div class="card">
        <div class="ch-alt m-b-0">
            <br>
            &nbsp;&nbsp;<label>Subject :&nbsp;</label> <b><span ng-bind="RaisedTicket.subject"> </span></b> &nbsp;|&nbsp;<label>Ticket ID &nbsp;:&nbsp;</label><b>UT<span ng-bind="RaisedTicket.uuId"></span></b><br>
            &nbsp;&nbsp;<label>By :&nbsp;</label> <b><span ng-bind="RaisedTicket.user.Name" style="font-weight: bold" ng-if="RaisedTicket.user.Name != null"></span><span ng-bind="RaisedTicket.name" style="font-weight: bold" ng-if="RaisedTicket.name != null"></span></b>&nbsp;&nbsp;|&nbsp;&nbsp;<label>On :&nbsp;</label><b><span style="font-weight: bold" ng-bind="RaisedTicket.ticketdate | date:'dd MMM yy'"></span></b>&nbsp;&nbsp;|&nbsp;
            &nbsp;<label>Status:&nbsp;</label> <b><label ng-bind="RaisedTicket.status"></label></b>
            <br>
            &nbsp;&nbsp;<label>Priority :&nbsp;</label><b><span ng-bind="Priority" style="font-weight: bold"></span></b>&nbsp;&nbsp;|&nbsp;&nbsp;<label>Assigned To :&nbsp;</label><b><span ng-bind="AssignedTo" style="font-weight: bold"></span></b>
            <br>
            <div class="pmb-block">
                <div class="pmbb-header m-t-30">
                    <dl class="dl-horizontal">
                        <dt class="p-l-30">Description</dt>
                        <dd>
                            <div class="fg-line">
                                        <textarea name="comments"
                                         ng-model="RaisedTicket.description" class="form-control"
                                         rows="4" disabled>
                            </textarea>
                            </div>
                        </dd>
                    </dl>

                    <dl class="dl-horizontal">
                        <dt class="p-l-30">Replies</dt>
                        <dd>
                            <div class="fg-line" ng-repeat="reply in ReplyDescriptions">
                                        <textarea name="comments"
                                                  ng-model="reply.description" class="form-control"
                                                  rows="4" style="border-width: 2px" disabled>
                            </textarea>
                                <!--<span ng-repeat="fromdate in ReplyFromanddates">{{fromdate.Name}}</span>-->
                                By &nbsp;<b><span>{{reply.replierId.Name}}</span></b>&nbsp;On&nbsp;<b><span>{{reply.replydate | date:'dd MMM yy'}}</span></b>
                                <br>
                                <br>
                            </div>
                        </dd>
                    </dl>

                    <form class="pmbb-edit" name="EditTickets">

                        <dl class="dl-horizontal required" ng-if="RaisedTicket.status=='Open'">
                            <dt class="p-l-30">Reply</dt>
                            <dd>
                                <div class="fg-line">
                                        <textarea name="comments"
                                                  ng-model="replyDetails.description" class="form-control"
                                                  rows="4" required>
                            </textarea>
                                </div>
                            </dd>
                        </dl>

                        <dl class="dl-horizontal" ng-if="RaisedTicket.status=='Open'">
                            <dt class="p-l-30">Status</dt>
                            <dd>
                                <div class="fg-line">
                                    <select chosen class="form-control" ng-model="replyDetails.status"
                                            data-placeholder-text-single="'Select Status'"
                                            name="Status">
                                        <option value="Open">Open</option>
                                        <option value="Close">Close</option>
                                        <option value="Hold">Hold</option>
                                    </select>
                                </div>
                            </dd>
                        </dl>

                        <dl class="dl-horizontal" ng-if="RaisedTicket.status=='Open'">
                            <dd>
                                <div class="fg-line m-t-10">
                                    <label class="radio radio-inline m-r-20">
                                        <input type="radio" name="internal" ng-model="replyDetails.internal" value="0">
                                        <i class="input-helper"></i>
                                        Internal usage
                                    </label>
                                </div>
                            </dd>
                        </dl>

                        <!--<div ng-if="complaint_type_valid_invalid == 2">-->
                        <dl class="dl-horizontal">
                            <dd>
                                <div class="fg-line m-t-10">
                                    <input type="checkbox" ng-model="ValidTickets" checked="true">
                                    <label>Valid Complaint</label>
                                </div>
                            </dd>
                        </dl>
                        <!--</div>-->


                        <div style="margin-left: 180px">
                            <button type="button" class="btn btn-icon-text btn-success waves-effect"
                                    ng-click="addReply()" ng-disabled="EditTickets.$invalid" ng-if="RaisedTicket.status=='Open'">
                                <i class="zmdi zmdi-save"></i> Reply
                            </button>

                            <button type="button" class="btn btn-icon-text btn-success waves-effect"
                                    ng-click="ReassignEmployee()" ng-if="RaisedTicket.status=='Open'">
                                <i class="zmdi zmdi-save"></i> Reassign
                            </button>
                        </div>
                    </form>

                </div>
            </div>
        </div>

        <!-- <div class="card" id="profile-main">
         <div class="pm-body clearfix">
                 <div class="pmb-block">
                     <div class="pmbb-header m-t-30">-->
        <!--  <dl class="dl-horizontal">
              <dt class="p-l-30">Description</dt>
              <dd>
                  <div class="fg-line">
                          <textarea name="comments"
                ng-model="RaisedTicket.description" class="form-control"
                rows="4" disabled>
              </textarea>
                  </div>
              </dd>
          </dl>-->
        <!--   <dl class="dl-horizontal">
               <dt class="p-l-30">Comments</dt>
               <dd>
                   <div class="fg-line" ng-repeat="reply in ReplyDescriptions">
                           <textarea name="comments"
                                     ng-model="reply.description" class="form-control"
                                     rows="4" style="border-style: inset;border-width: 2px" disabled>
               </textarea>
                       &lt;!&ndash;<span ng-repeat="fromdate in ReplyFromanddates">{{fromdate.Name}}</span>&ndash;&gt;
                       By &nbsp;<b><span>{{reply.replierId.Name}}</span></b>&nbsp;On&nbsp;<b><span>{{reply.replydate | date:'dd MMM yy'}}</span></b>
                       <br>
                       <br>
                   </div>
               </dd>
           </dl>-->

        <!-- <form class="pmbb-edit" name="EditTickets">

                 <dl class="dl-horizontal required">
                     <dt class="p-l-30">Reply</dt>
                     <dd>
                         <div class="fg-line">
                                 <textarea name="comments"
                                           ng-model="replyDetails.description" class="form-control"
                                           rows="4" required>
                     </textarea>
                         </div>
                     </dd>
                 </dl>

                 <dl class="dl-horizontal">
                     <dt class="p-l-30">Status</dt>
                     <dd>
                         <div class="fg-line">
                             <select chosen class="form-control" ng-model="replyDetails.status"
                                     data-placeholder-text-single="'Select Status'"
                                     name="Status">
                                 <option value="Open">Open</option>
                                 <option value="Close">Close</option>
                                 <option value="Hold">Hold</option>
                             </select>
                         </div>
                     </dd>
                 </dl>

                 <dl class="dl-horizontal">
                     <dd>
                         <div class="fg-line m-t-10">
                             <label class="radio radio-inline m-r-20">
                                 <input type="radio" name="internal" ng-model="replyDetails.internal" value="0">
                                 <i class="input-helper"></i>
                                 Internal usage
                             </label>
                         </div>
                     </dd>
                 </dl>

                 <div style="margin-left: 180px">
                 <button type="button" class="btn btn-icon-text btn-success waves-effect"
                         ng-click="addReply()" ng-disabled="EditTickets.$invalid">
                     <i class="zmdi zmdi-save"></i> Reply
                 </button>

                 <button type="button" class="btn btn-icon-text btn-success waves-effect"
                         ng-click="ReassignEmployee()">
                     <i class="zmdi zmdi-save"></i> Reassign
                 </button>
                 </div>
                 </form>-->
        <!--            </div>
        </div>
    </div>
</div>-->
        <br>
    </div>

    <script type="text/ng-template" id="employee-reassign-for-ticket.html">
        <div class="modal-header">
            <h4 class="modal-title">Re-assign Employee</h4>
        </div>
        <form name="reassignForm">
            <div class="modal-body">
                <dl class="dl-horizontal required">
                    <dt class="p-l-30">Department</dt>
                    <dd>
                        <div class="fg-line">
                            <select chosen class="form-control"
                                    ng-options="EmpDepartment as EmpDepartment.department for EmpDepartment in EmpDepartments"
                                    ng-model="dept"
                                    ng-change="selecteDept(dept)" required>
                            </select>
                        </div>
                    </dd>
                </dl>

                <dl class="dl-horizontal required">
                    <dt class="p-l-30">Employee</dt>
                    <dd>
                        <div class="fg-line">
                            <select chosen class="form-control"
                                    ng-options="Employee as Employee.Name for Employee in Employees"
                                    ng-model="empName"
                                    ng-change="selectedEmp(empName)" required>
                            </select>
                        </div>
                    </dd>
                </dl>

                <dl class="dl-horizontal required">
                    <dt class="p-l-30">Comments</dt>
                    <dd>
                        <div class="fg-line">
                    <textarea name="comments"
                              ng-model="reAssignEmployeeDetails.description" class="form-control"
                              rows="4"
                              placeholder="Information regarding for employee reassigning" required>
                    </textarea>
                        </div>
                    </dd>
                </dl>

                <dl class="dl-horizontal">
                    <dd>
                        <div class="fg-line m-t-10">
                            <label class="radio radio-inline m-r-20">
                                <input type="radio" name="internal" ng-model="internal">
                                <i class="input-helper"></i>
                                Internal usage
                            </label>
                        </div>
                    </dd>
                </dl>



            </div>
            <div class="modal-footer">
                <button class="btn btn-link" type="button" ng-click="cancelReassignEmployee()">Cancel</button>
                <button class="btn btn-link" type="button" ng-click="ReassignEmp()" ng-disabled="reassignForm.$invalid">Assign</button>
            </div>
        </form>
    </script>

    <script type="text/ng-template" id="ErrorValidateTickets.html">
        <div class="modal-header">
            <h4 class="modal-title">Message</h4>
        </div>
        <div class="modal-body">
            <h3>
                <p>
                    Please Choose Valid Complaints option to update <br>
                </p>
            </h3>
        </div>
        <div class="modal-footer">
            <button class="btn btn-link" type="button" ng-click="ok();">OK</button>
        </div>
    </script>